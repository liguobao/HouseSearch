(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eafa708"],{"5af3":function(t,e,a){},6480:function(t,e,a){"use strict";var i=a("5af3"),n=a.n(i);n.a},cd69:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail",class:{"is-mobile":t.isMobile}},[a("header",[a("router-link",{staticClass:"name",attrs:{tag:"div",to:"/"}},[t._v("地图搜租房")]),t.detail?a("div",{staticClass:"form"},[a("a",{staticClass:"title",attrs:{href:t.detail.onlineURL,target:"_blank"}},[t._v(t._s(t.detail.title))]),a("a",{staticClass:"source",attrs:{href:t.detail.onlineURL,target:"_blank"}},[t._v(t._s(t.detail.onlineURL))])]):t._e()],1),t.detail?a("div",{staticClass:"content"},[t.detail.pictures&&t.detail.pictures.length?a("div",{staticClass:"images-wrap"},[a("el-carousel",{attrs:{"indicator-position":"inside",interval:0,autoplay:!1,arrow:"always"}},t._l(t.detail.pictures,function(e){return a("el-carousel-item",{key:e},[a("a",{staticClass:"image",attrs:{href:e,target:"_blank"}},[t.is3D(e)?a("span",[t._v("点击进入3D看房")]):a("img",{attrs:{src:e}})])])}),1)],1):t._e(),a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[a("a",{attrs:{href:t.detail.onlineURL,target:"_blank"}},[a("el-tag",{attrs:{size:"mini",type:t.tagType(t.detail)}},[t._v(t._s(t.tagText(t.detail)))]),t._v("\n          "+t._s(t.detail.title)+"\n        ")],1),t.detail.price>0?a("span",{staticClass:"price"},[a("em",[t._v(t._s(t.detail.price))]),t._v("/月\n        ")]):t._e(),a("span",[t._v("发布时间："+t._s(t.detail.pubTime))]),a("el-button",{staticClass:"collect",attrs:{type:"warning",icon:"el-icon-star-off",circle:"",size:"mini"},on:{click:function(e){t.collect(t.detail)}}})],1),a("div",{staticClass:"address"},[a("div",{staticClass:"location"},[a("i",{staticClass:"el-icon-location"}),a("div",{},[t._v(t._s(t.detail.location))])]),t.detail&&t.detail.longitude?a("div",{staticClass:"map",attrs:{id:"map"}}):t._e()]),a("div",{staticClass:"text",domProps:{innerHTML:t._s(t.detail.text)}})])]):t._e(),t.is404?[a("div",{staticClass:"is-404"},[a("div",[t._v("404,找不到数据")]),a("el-button",{attrs:{type:"primary"},on:{click:t.goBack}},[t._v("返回地图页")])],1)]:t._e(),t.view?a(t.view,{tag:"component"}):t._e()],2)},n=[],r=(a("28a5"),a("96cf"),a("3b8d")),s=a("795b"),o=a.n(s),c=(a("a481"),a("4582")),l=a("b69e").default,u={props:{id:{},onlineURL:{}},data:function(){return{detail:void 0,view:void 0,collection:!1,zoom:16,map:void 0,is404:!1}},methods:{goBack:function(){this.$router.replace("/Map")},tagText:function(t){return Object(c["a"])(t)},tagType:function(t){return Object(c["b"])(t)},appendScript:function(t){var e=this;return new o.a(function(a){var i=document.createElement("script");i.charset="utf-8",i.src=t,document.head.appendChild(i),i.onload=function(){a()},i.onerror=function(){e.$message.error("地图初始化失败,请重新刷新页面")}})},is3D:function(t){return-1!==t.indexOf("realsee.com/ziroom/")},collect:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var i,n,r,s,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,i.user){t.next=13;break}return n=a("9f8f").default,t.prev=3,t.next=6,l(n,{props:{loginVisible:!0,isMobile:i.isMobile}},function(t){o.view=t});case 6:this.view=void 0,t.next=13;break;case 9:return t.prev=9,t.t0=t["catch"](3),this.view=void 0,t.abrupt("return");case 13:if(!this.collection){t.next=15;break}return t.abrupt("return");case 15:return this.collection=!0,r=this.$store.state.userInfo.id,t.next=19,this.$ajax.post("v2/users/".concat(r,"/collections"),{houseID:e.id});case 19:s=t.sent,gtag&&gtag("event","收藏",{event_category:e.title,label:e.city}),this.collection=!1,this.isMobile?alert(s.message):this.$message.success(s.message);case 23:case"end":return t.stop()}},t,this,[[3,9]])}));function e(e){return t.apply(this,arguments)}return e}(),getDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new o.a(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a,i){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$ajax.get("v2/houses/".concat(e.id,"?tdsourcetag=s_pcqq_aiomsg&onlineURL=").concat(e.$route.query.onlineURL));case 3:n=t.sent,e.detail=n.data,n.data?a():(e.is404=!0,i()),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error(t.t0.message),i();case 12:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),installAmapUI:function(t,e){return new o.a(function(a,i){AMapUI.loadUI(["misc/PositionPicker"],function(i){var n=new i({mode:"dragMarker",zIndex:1e5,map:t});n.on("success",function(t){e.myPosition=t.position,e.positionPicker=n;var a=new AMap.LngLat(t.position.lng,t.position.lat);e.lnglat=a,e.keyword=t.address}),a(n)})})},installPlugin:function(t,e){return new o.a(function(e,a){AMap.plugin(["AMap.ToolBar","AMap.Driving","AMap.LineSearch","AMap.StationSearch","AMap.Transfer","AMap.Walking","AMap.Riding","AMap.Geolocation","AMap.AutoComplete","AMap.PlaceSearch"],function(){var a=new AMap.ToolBar;t.addControl(a);e()})})},initMap:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=new AMap.Map("map",{}),this.map=e,e.clearMap(),a=new AMap.Marker({map:e,title:this.detail.title,position:[this.detail.longitude,this.detail.latitude]}),t.next=6,this.installPlugin(e,self);case 6:return t.next=8,this.installAmapUI(e,self);case 8:e.add(a),e.setZoomAndCenter(16,[this.detail.longitude,this.detail.latitude]);case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:{isMobile:function(){return this.$store.state.isMobile},user:function(){return!!this.$store.state.userInfo}},created:function(){},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e="8a971a2f88a0ec7458d43b8bc03b6462",a="AMap.ArrivalRange,AMap.Scale,AMap.Geocoder,AMap.Transfer,AMap.AutoComplete,AMap.CitySearch,AMap.Walking".split(),a.push("AMap.ToolBar"),i="https://webapi.amap.com/maps?v=1.4.8&key=".concat(e,"&plugin=").concat(a.join()),!this.id){t.next=15;break}return t.next=7,this.getDetail();case 7:if(gtag("event","房源详情页"),this.detail.longitude){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,this.appendScript(i);case 12:return t.next=14,this.appendScript("//webapi.amap.com/ui/1.0/main.js?v=1.0.11");case 14:this.initMap();case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},p=u,d=(a("6480"),a("2877")),f=Object(d["a"])(p,i,n,!1,null,"a88acf5e",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-4eafa708.01feb760.js.map